@{
    ViewData["Title"] = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

@model IEnumerable<AppUserActions>
@{
    long count = 1;
    string countString;
}
@section Styles{

}
@section Scripts{

    <script>
        //function checkFunction() {
        //    $.ajax({
        //        type: "POST",
        //        url: "/admin/UserActions/UpdateIsAlowed",
        //        dataType: "json",
        //        success: function (response) {
        //            alert("You has active");
        //        }
        //    });

        //};

        function checkNotFunction() {
            $.ajax({
                type: "POST",
                url: "/Admin/UserActions/UpdateIsAlowed",
                data: {
                    UserId: $("#iduser@*_@count.ToString()*@").val(),
                    ActionId: $("#idaction@*_@count.ToString()*@").val()
                },
                dataType: "json",
                success: function (response) {
                    alert("You has not active");
                }
            });

        };
    </script>
}
<h1 class="bg-info text-white">All Roles</h1>
@*<a asp-action="Create" class="btn btn-secondary">Create a Role</a>*@

<table class="table table-sm table-bordered table-bordered">
    <tr><th>IdUser</th><th>IdAction</th><th>Description</th><th>IsAllowed</th><th>Update</th><th>Delete</th></tr>
    @foreach (var item in Model)
    {
        <tr>
            <td>@item.IdUser.ToString()</td>
            <td>@item.IdAction</td>
            <td>@item.Description</td>
            <td>
                @if (@item.IsAllowed == true)
                {

                    <input type="hidden" value="@item.IdUser" id="iduser_@count.ToString()" />
                    <input type="hidden" value="@item.IdAction" id="idaction_@count.ToString()" />

                    <i onclick="checkFunction()" id="IsAlowed" class="glyphicon glyphicon-ok-circle fa-2x bg-success"></i>

                }
                else
                {
                    <i onclick="checkNotFunction()" id="NotIsAlowed" class="glyphicon glyphicon-ban-circle fa-2x bg-warning"></i>

                }
            </td>
            <td><a class="btn btn-sm btn-primary color-red">Update</a></td>
            <td>
                <form method="post">
                    <button type="submit" class="btn btn-sm btn-danger">
                        Delete
                    </button>
                </form>
            </td>
        </tr>
    }
</table>